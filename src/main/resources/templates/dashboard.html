<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Escudería F1 - Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" rel="stylesheet">

    <style>
        /* F1 DIGITAL HUD THEME */
        :root {
            --f1-red: #FF2A2A;
            --carbon-dark: #0F0F0F;
            --carbon-light: #1A1A1A;
            --accent-blue: #00BFFF;
        }
        body {
            background-color: var(--carbon-dark);
            color: #EAEAEA;
            font-family: 'Inter', sans-serif;
            padding-top: 70px;
        }
        .text-f1-red { color: var(--f1-red); }
        .bg-f1-red { background-color: var(--f1-red); }
        .border-f1-red { border-color: var(--f1-red) !important; }
        .text-accent-blue { color: var(--accent-blue); }
        .bg-accent-blue { background-color: var(--accent-blue); }

        /* Estilo de Tarjeta de Navegación Rápida */
        .nav-card-f1 {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            background-color: var(--carbon-light);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-decoration: none;
            color: #EAEAEA;
        }
        .nav-card-f1:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.7);
        }
        .nav-card-f1.red:hover { border-color: var(--f1-red) !important; box-shadow: 0 0 20px rgba(255, 42, 42, 0.6); }
        .nav-card-f1.blue:hover { border-color: var(--accent-blue) !important; box-shadow: 0 0 20px rgba(0, 191, 255, 0.6); }
        .nav-card-f1.green:hover { border-color: #28a745 !important; box-shadow: 0 0 20px rgba(40, 167, 69, 0.6); }

        /* Estilo de las tarjetas internas */
        .card-inner-f1 {
            background-color: var(--carbon-light);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
    </style>
</head>

<body>

<!-- Navbar F1 Style -->
<nav class="navbar navbar-expand-lg navbar-dark bg-black fixed-top shadow-lg border-bottom border-f1-red">
    <div class="container-fluid px-4">
        <a class="navbar-brand fw-bold text-f1-red fs-4" href="#">
            <i class="bi bi-speedometer2 me-2"></i>
            ESCUDERÍA SIM
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link active fw-semibold text-f1-red border-bottom border-f1-red" th:href="@{/dashboard}">DASHBOARD</a></li>
                <li class="nav-item"><a class="nav-link fw-semibold text-white-50" th:href="@{/garaje}">GARAJE</a></li>
                <li class="nav-item"><a class="nav-link fw-semibold text-white-50" th:href="@{/almacen}">ALMACÉN</a></li>
                <li class="nav-item"><a class="nav-link fw-semibold text-white-50" th:href="@{/carreras}">CARRERAS</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- Contenido principal -->
<div class="container py-5 mt-5">

    <!-- Título principal -->
    <div class="text-center mb-5 animate__animated animate__fadeInDown">
        <h1 class="display-3 fw-bold text-white mb-3">
            <span class="text-f1-red">PANEL</span> DE <span class="text-accent-blue">CONTROL</span>
        </h1>
        <div class="bg-accent-blue mx-auto mb-3 rounded" style="height: 4px; width: 100px;"></div>
        <p class="lead text-light-50">Gestiona tu escudería de Fórmula 1</p>
    </div>

    <!-- Botones de navegación rápida (Acentos de color) -->
    <div class="row g-4 mb-5">
        <div class="col-md-4 animate__animated animate__fadeInUp">
            <a th:href="@{/garaje}" class="nav-card-f1 w-100 py-4 rounded-4 shadow-lg text-center red">
                <i class="bi bi-car-front-fill fs-1 d-block mb-2 text-f1-red"></i>
                <h5 class="mb-0 fw-bold">GARAGE</h5>
            </a>
        </div>
        <div class="col-md-4 animate__animated animate__fadeInUp animate__delay-1s">
            <a th:href="@{/almacen}" class="nav-card-f1 w-100 py-4 rounded-4 shadow-lg text-center blue">
                <i class="bi bi-box-seam fs-1 d-block mb-2 text-accent-blue"></i>
                <h5 class="mb-0 fw-bold">ALMACÉN</h5>
            </a>
        </div>
        <div class="col-md-4 animate__animated animate__fadeInUp animate__delay-2s">
            <a th:href="@{/carreras}" class="nav-card-f1 w-100 py-4 rounded-4 shadow-lg text-center green">
                <i class="bi bi-flag-fill fs-1 d-block mb-2 text-success"></i>
                <h5 class="mb-0 fw-bold">CARRERAS</h5>
            </a>
        </div>
    </div>

    <!-- Sección de Coches -->
    <section class="mb-5 animate__animated animate__fadeInLeft">
        <div class="text-center mb-4">
            <h2 class="display-6 fw-bold text-accent-blue border-bottom border-f1-red pb-2 d-inline-block">COCHES DE LA ESCUDERÍA</h2>
        </div>
        <div class="row g-4">
            <div class="col-md-6 col-lg-4 animate__animated animate__zoomIn" th:each="coche : ${coches}">
                <div class="card h-100 rounded-4 shadow-lg border-f1-red card-inner-f1">
                    <div class="position-relative overflow-hidden rounded-top-4">
                        <img th:src="${coche.imagen}" class="card-img-top object-fit-cover"
                             style="height: 220px; filter: brightness(0.7);"
                             alt="Imagen del coche"
                             onerror="this.onerror=null; this.src='https://placehold.co/800x400/171717/FF2A2A?text=CAR_F1';">
                        <div class="position-absolute top-0 end-0 p-3">
                                <span class="badge bg-f1-red text-dark px-3 py-2 rounded-pill shadow-sm fw-bold">
                                    <i class="bi bi-car-front"></i> F1
                                </span>
                        </div>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title fw-bold text-f1-red mb-3" th:text="${coche.modelo}">Modelo</h5>
                        <div class="d-flex align-items-center mb-2">
                            <i class="bi bi-person-fill text-accent-blue me-2"></i>
                            <small class="text-white-50">Piloto Asignado:</small>
                        </div>
                        <p class="lead fw-semibold text-white mb-0" th:text="${coche.piloto ?: 'SIN ASIGNAR'}">Nombre Piloto</p>
                    </div>
                    <div class="card-footer bg-black border-f1-red p-3">
                        <a th:href="@{/garaje/{id}(id=${coche.id})}" class="btn bg-f1-red text-dark w-100 rounded-3 fw-bold">
                            <i class="bi bi-eye"></i> VER DETALLES
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección de Componentes (Simplificada) -->
    <section class="mb-5 animate__animated animate__fadeInRight">
        <div class="text-center mb-4">
            <h2 class="display-6 fw-bold text-accent-blue border-bottom border-f1-red pb-2 d-inline-block">ESTADO DE PIEZAS CLAVE</h2>
        </div>

        <div class="row g-4 mt-3">
            <div class="col-sm-6 col-md-4 col-lg-3 animate__animated animate__fadeInUp"
                 th:each="comp : ${componente}" th:if="${comp.tipo.name().equalsIgnoreCase('MOTOR') or comp.tipo.name().equalsIgnoreCase('NEUMATICOS')}" >
                <div class="card h-100 rounded-4 shadow-lg border-accent-blue card-inner-f1">
                    <div class="card-header border-accent-blue pt-3 pb-0 bg-black">
                        <div class="d-flex justify-content-between align-items-center">
                            <h6 class="mb-0 fw-bold text-truncate text-f1-red" th:text="${comp.nombre}">Componente</h6>
                            <span class="badge rounded-pill bg-accent-blue text-dark" th:text="${comp.tipo}">TIPO</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <small class="text-white-50">
                                <i class="bi bi-activity text-success"></i> ESTADO
                            </small>
                            <strong class="text-success" th:text="${#numbers.formatDecimal(comp.estado, 0, 0)} + '%'">100%</strong>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <small class="text-white-50">
                                <i class="bi bi-clock-history text-f1-red"></i> VIDA RESTANTE
                            </small>
                            <strong class="text-white" th:text="${comp.limiteUsos - comp.vecesUsado}">0</strong>
                        </div>

                        <div th:if="${comp.coche != null}" class="alert bg-f1-red text-dark p-2 mb-0 mt-3 small border-0 fw-bold">
                            <i class="bi bi-car-front-fill"></i>
                            ASIGNADO A: <span th:text="${comp.coche.piloto}"></span>
                        </div>
                        <div th:unless="${comp.coche != null}" class="alert bg-success text-dark p-2 mb-0 mt-3 small border-0 fw-bold">
                            <i class="bi bi-check-circle"></i> DISPONIBLE
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

</div>

<!-- Footer -->
<footer class="bg-black text-f1-red text-center py-4 mt-5 shadow-lg border-top border-f1-red">
    <div class="container">
        <p class="mb-0">
            <i class="bi bi-speedometer2"></i>
            <strong>ESCUDERÍA F1</strong> - Sistema de Gestión
        </p>
        <small class="text-muted">Powered by Bootstrap 5</small>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    });
</script>
</body>
</html>